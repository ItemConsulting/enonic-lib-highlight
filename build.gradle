plugins {
    id 'java'
    id 'maven-publish'
    id 'com.enonic.xp.app' version '2.0.0'
    id "com.jfrog.bintray" version "1.8.4"
}

app {
  name = "${appName}"
  displayName = "${appDisplayName}"
  vendorName = "${vendorName}"
  vendorUrl = "${vendorUrl}"
  systemVersion = "${xpVersion}"
}

repositories {
    mavenLocal()
    jcenter()
    xp.enonicRepo()
    maven {
        url  "http://itemconsulting.bintray.com/public"
    }
}

dependencies {
  include "com.enonic.xp:lib-portal:${xpVersion}"
  webjar "org.webjars:highlightjs:${highlightVersion}"
  webjar "org.webjars.npm:github-com-wcoder-highlightjs-line-numbers-js:${highlightLineNumbersVersion}"
}

publishing {
  publications {
    mavenJava(MavenPublication) {
      from components.java
      groupId group
      artifactId projectName
      version version
    }
  }
}

bintray {
  user = "$bintrayUser"
  key = "$bintrayApiKey"
  publications = ['mavenJava']
  configurations = ['archives']
  pkg {
    repo = 'public'
    name = 'no.item.xp.highlight'
    userOrg = 'itemconsulting'
    licenses = ['BSD 3-Clause']
    vcsUrl = 'https://github.com/ItemConsulting/highlight.git'
    version {
      name = project.version
      released = new Date()
    }
  }
}